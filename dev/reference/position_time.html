<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Position adjustments for timezones — position_time • ggtime</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Position adjustments for timezones — position_time"><meta property="og:description" content="Timezone-aware position adjustments preserve the vertical position of a
geometry while adjusting its horizontal position display the time in
either civil or absolute time. It requires the time variables to be mapped to
either the x or y aesthetic to be represented in either a base::POSIXt or
mixtime::mixtime() format."><meta property="og:image" content="https://pkg.mitchelloharawild.com/ggtime/logo.svg"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="pkg.mitchelloharawild.com" src="https://track.mitchelloharawild.com/js/plausible.js"></script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggtime</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/ggtime.html">Introduction to ggtime</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mitchelloharawild/ggtime" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Position adjustments for timezones</h1>
    <small class="dont-index">Source: <a href="https://github.com/mitchelloharawild/ggtime/blob/main/R/position-time.R" class="external-link"><code>R/position-time.R</code></a></small>
    <div class="hidden name"><code>position_time.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Timezone-aware position adjustments preserve the vertical position of a
geometry while adjusting its horizontal position display the time in
either civil or absolute time. It requires the time variables to be mapped to
either the x or y aesthetic to be represented in either a <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">base::POSIXt</a></code> or
<code><a href="https://pkg.mitchelloharawild.com/mixtime/reference/mixtime-package.html" class="external-link">mixtime::mixtime()</a></code> format.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">position_time_civil</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">position_time_absolute</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="details">
    <h2>Details</h2>
    <p>These position adjustments handle time data with different timezone behaviors:</p><ul><li><p><code>position_time_civil()</code> applies timezone offsets to position time to
align times that would be experienced in each respective timezone.</p></li>
<li><p><code>position_time_absolute()</code> does not apply any timezone offsets, keeping
time positioned in their exact relative timing across timezones.</p></li>
</ul></div>
    <div id="practical-usage">
    <h2>Practical usage</h2>



<p>Using timezone information to position time differently reveals different
structures in the data. This is most evident when plotting multiple time
series across different timezones.</p>
<p>Civil time (<code>position_time_civil()</code>) positions time as experienced by the
observer in their timezone (also known as local time). It will align 9AM in
Australia/Melbourne with 9AM in America/New_York, even though they occur at
different absolute times. This is useful for comparing behavioural patterns
that vary throughout times of the day, for example the amount of traffic
during morning rush hour as people commute to work.</p>
<p>Absolute time (<code>position_time_absolute()</code>) positions time in a single
reference timezone (usually UTC), reflecting the exact time when events
happen. In absolute time, 9AM in Australia/Melbourne (AEST, UTC+10) will be
aligned with 7PM in America/New_York (EST, UTC-5) of the previous day. This
accurately reflects the equivalent timing of events across different
timezones, which is useful for comparing events that happen simultaneously
around the world, such as global financial market openings or international
conference calls.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_tz_mixed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="fu">mixtime</span><span class="fu">::</span><span class="fu"><a href="https://pkg.mitchelloharawild.com/mixtime/reference/mixtime-package.html" class="external-link">mixtime</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2023-10-01"</span>, tz <span class="op">=</span> <span class="st">"Australia/Melbourne"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0</span><span class="op">:</span><span class="fl">23</span> <span class="op">*</span> <span class="fl">3600</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2023-10-01"</span>, tz <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0</span><span class="op">:</span><span class="fl">23</span> <span class="op">*</span> <span class="fl">3600</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Civil time positioning aligns times in the same local timezone</span></span></span>
<span class="r-in"><span><span class="co">#ggplot(df_tz_mixed, aes(time, value)) +</span></span></span>
<span class="r-in"><span><span class="co">#  geom_time_line(position = position_time_civil())</span></span></span>
<span class="r-in"><span><span class="co"># Absolute time positioning aligns times in a common timezone (e.g. UTC)</span></span></span>
<span class="r-in"><span><span class="co">#ggplot(df_tz_mixed, aes(time, value)) +</span></span></span>
<span class="r-in"><span><span class="co">#  geom_time_line(position = position_time_absolute())</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Positioning can also be used in other geoms</span></span></span>
<span class="r-in"><span><span class="co">#ggplot(df_tz_mixed, aes(time, value)) +</span></span></span>
<span class="r-in"><span><span class="co">#  geom_point(position = position_time_civil())</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://mitchelloharawild.com" class="external-link">Mitchell O’Hara-Wild</a>, <a href="https://www.cynthiahqy.com" class="external-link">Cynthia A. Huang</a>, <a href="https://www.mjskay.com" class="external-link">Matthew Kay</a>, <a href="http://robjhyndman.com" class="external-link">Rob Hyndman</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

